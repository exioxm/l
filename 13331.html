<!DOCTYPE html>
<html>
<head>
    <title>LASD Transit Patrol</title>
    <style>
        body { text-align: center; background: #1a1a1a; color: #f1c40f; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
        canvas { background: #444; border: 5px solid #d4af37; display: block; margin: 20px auto; box-shadow: 0 0 20px rgba(0,0,0,0.5); }
        .ui { font-size: 22px; font-weight: bold; margin-bottom: 10px; }
        .badge { color: #fff; font-size: 14px; margin-top: 5px; opacity: 0.8; }
    </style>
</head>
<body>
    <h1>LASD: County Transit Patrol</h1>
    <div class="ui">Arrests: <span id="score">0</span> | Patroling LA County</div>
    <canvas id="gameCanvas" width="700" height="450"></canvas>
    <div class="badge">Maintain order in the Metro sectors. Don't let suspects escape the county line!</div>

    <script>
        const canvas = document.getElementById("gameCanvas");
        const ctx = canvas.getContext("2d");
        const scoreElement = document.getElementById("score");

        let score = 0;
        // LASD Cruiser: Black & White
        let deputy = { x: 60, y: 200, width: 45, height: 22, speed: 6 };
        let suspect = { x: 650, y: Math.random() * 400, width: 35, height: 22, speed: 4 };
        let keys = {};

        window.addEventListener("keydown", e => keys[e.code] = true);
        window.addEventListener("keyup", e => keys[e.code] = false);

        function update() {
            if (keys["ArrowUp"] && deputy.y > 0) deputy.y -= deputy.speed;
            if (keys["ArrowDown"] && deputy.y < canvas.height - deputy.height) deputy.y += deputy.speed;
            if (keys["ArrowLeft"] && deputy.x > 0) deputy.x -= deputy.speed;
            if (keys["ArrowRight"] && deputy.x < canvas.width - deputy.width) deputy.x += deputy.speed;

            suspect.x -= suspect.speed;
            if (suspect.x < -40) {
                suspect.x = 750;
                suspect.y = Math.random() * (canvas.height - 20);
                score = Math.max(0, score - 2); 
            }

            if (deputy.x < suspect.x + suspect.width &&
                deputy.x + deputy.width > suspect.x &&
                deputy.y < suspect.y + suspect.height &&
                deputy.y + deputy.height > suspect.y) {
                score += 1;
                suspect.x = 750;
                suspect.y = Math.random() * (canvas.height - 20);
                suspect.speed += 0.2; // Difficulty increases
            }
            scoreElement.innerText = score;
        }

        function draw() {
            ctx.fillStyle = "#333"; // Asphalt
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Road Lines
            ctx.strokeStyle = "white";
            ctx.setLineDash([20, 20]);
            ctx.beginPath(); ctx.moveTo(0, 150); ctx.lineTo(700, 150); ctx.stroke();
            ctx.beginPath(); ctx.moveTo(0, 300); ctx.lineTo(700, 300); ctx.stroke();

            // Draw LASD Deputy Cruiser (Black & White)
            ctx.fillStyle = "black";
            ctx.fillRect(deputy.x, deputy.y, deputy.width, deputy.height);
            ctx.fillStyle = "white";
            ctx.fillRect(deputy.x + 10, deputy.y, 25, deputy.height); // White doors
            ctx.fillStyle = "#d4af37"; // Gold Star/Markings
            ctx.fillRect(deputy.x + 18, deputy.y + 5, 8, 8); 
            
            // Red/Blue Lightbar
            ctx.fillStyle = "red"; ctx.fillRect(deputy.x + 10, deputy.y - 4, 10, 4);
            ctx.fillStyle = "blue"; ctx.fillRect(deputy.x + 25, deputy.y - 4, 10, 4);

            // Draw Suspect (Rust Red)
            ctx.fillStyle = "#a93226";
            ctx.fillRect(suspect.x, suspect.y, suspect.width, suspect.height);

            requestAnimationFrame(() => {
                update();
                draw();
            });
        }
        draw();
    </script>
</body>
</html>
