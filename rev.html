<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Cookie Clicker: Zenith 5.0</title>
    <style>
        :root { --p: #ff9d00; --bg: #05050a; --card: #10101a; --white: #ffffff; --debug: #ff3e3e; --gold: #ffd700; }
        body { margin: 0; background: var(--bg); color: white; font-family: 'Segoe UI', system-ui, sans-serif; display: flex; height: 100vh; overflow: hidden; }
        
        /* UI Panels */
        #game-left { flex: 1.5; display: flex; flex-direction: column; align-items: center; justify-content: center; position: relative; border-right: 2px solid #222; }
        #game-right { flex: 1; background: #0c0c14; display: flex; flex-direction: column; box-shadow: -10px 0 30px rgba(0,0,0,0.5); }

        /* Stats & Naming */
        .header-box { text-align: center; position: absolute; top: 30px; width: 100%; }
        .bakery-title { font-size: 24px; color: #888; cursor: pointer; transition: 0.3s; margin-bottom: 5px; }
        .bakery-title:hover { color: var(--p); text-shadow: 0 0 10px var(--p); }
        .cookie-count { font-size: 80px; font-weight: 900; color: var(--p); text-shadow: 0 0 40px rgba(255, 157, 0, 0.4); }
        .cps-label { font-size: 18px; color: #555; }

        /* The Big Cookie */
        #cookie-outer { position: relative; cursor: pointer; transition: transform 0.05s; z-index: 10; margin-top: 50px; }
        #cookie-outer:active { transform: scale(0.94); }
        .cookie-main { width: 300px; height: 300px; background: radial-gradient(circle at 30% 30%, #e6a46a, #d2691e); border-radius: 50%; box-shadow: 0 20px 60px rgba(0,0,0,0.8); position: relative; }
        .chip { position: absolute; background: #3e2723; border-radius: 50%; pointer-events: none; }

        /* Golden Cookie */
        .golden-cookie { position: absolute; width: 60px; height: 60px; background: var(--gold); border-radius: 50%; cursor: pointer; box-shadow: 0 0 40px var(--gold); z-index: 100; animation: pulse 1s infinite; display: none; }
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.1); } 100% { transform: scale(1); } }

        /* Shop System */
        .shop-nav { display: flex; background: #1a1a2e; }
        .shop-tab { flex: 1; padding: 15px; text-align: center; cursor: pointer; font-weight: bold; font-size: 14px; opacity: 0.5; border-bottom: 3px solid transparent; }
        .shop-tab.active { opacity: 1; border-bottom-color: var(--p); background: #252545; }
        .shop-scroll { flex: 1; overflow-y: auto; padding: 15px; }

        .item-card { 
            background: var(--card); padding: 15px; border-radius: 12px; margin-bottom: 12px; 
            display: flex; justify-content: space-between; align-items: center;
            border: 1px solid #222; transition: 0.3s; opacity: 0.4; pointer-events: none;
        }
        .item-card.affordable { 
            background: var(--white); color: #000; opacity: 1; pointer-events: auto; 
            box-shadow: 0 0 20px rgba(255,255,255,0.3); border-color: var(--white);
        }
        .item-card.affordable h4 { color: #000; }
        .item-card h4 { margin: 0; color: var(--p); font-size: 18px; }
        .item-card p { margin: 3px 0 0; font-size: 12px; color: #777; }
        .affordable p { color: #444; }

        /* Modal System */
        .modal-bg { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); display: none; align-items: center; justify-content: center; z-index: 1000; backdrop-filter: blur(8px); }
        .modal-content { background: #1a1a2e; padding: 40px; border-radius: 20px; text-align: center; border: 2px solid var(--p); min-width: 320px; }
        .modal-input { background: #0c0c16; border: 2px solid #333; color: white; padding: 12px; border-radius: 8px; width: 80%; margin: 20px 0; outline: none; }
        .btn { background: var(--p); color: black; border: none; padding: 12px 25px; border-radius: 8px; font-weight: bold; cursor: pointer; margin: 5px; }
        .btn-debug { background: var(--debug); color: white; width: 100%; margin-top: 10px; }

        /* Floating +1 Text */
        .float { position: absolute; pointer-events: none; animation: floatUp 0.8s forwards; font-weight: 900; color: var(--white); font-size: 22px; z-index: 99; }
        @keyframes floatUp { 0% { transform: translateY(0); opacity: 1; } 100% { transform: translateY(-120px); opacity: 0; } }

        /* Debug Button Corner */
        #debug-corner { position: absolute; top: 20px; left: 20px; background: var(--debug); padding: 10px; border-radius: 5px; cursor: pointer; display: none; font-weight: bold; }
    </style>
</head>
<body>

<div id="debug-corner" onclick="openModal('debug-modal')">ZENITH CONSOLE</div>

<div id="game-left">
    <div class="header-box">
        <div class="bakery-title" id="bakery-label" onclick="openModal('name-modal')">Player's Bakery</div>
        <div class="cookie-count" id="count-display">0</div>
        <div class="cps-label">Cookies Per Second: <span id="cps-display">0</span></div>
    </div>

    <div class="golden-cookie" id="gold-cookie" onclick="clickGold()"></div>

    <div id="cookie-outer" onclick="clickMainCookie(event)">
        <div class="cookie-main">
            <div class="chip" style="width:25px; height:25px; top:40px; left:80px;"></div>
            <div class="chip" style="width:30px; height:30px; top:180px; left:60px;"></div>
            <div class="chip" style="width:20px; height:20px; top:210px; left:180px;"></div>
            <div class="chip" style="width:28px; height:28px; top:70px; left:190px;"></div>
            <div class="chip" style="width:22px; height:22px; top:130px; left:130px;"></div>
        </div>
    </div>
</div>

<div id="game-right">
    <div class="shop-nav">
        <div class="shop-tab active" id="tab-units" onclick="switchTab('units')">Buildings</div>
        <div class="shop-tab" id="tab-upgrades" onclick="switchTab('upgrades')">Upgrades</div>
    </div>
    <div class="shop-scroll" id="shop-container"></div>
</div>

<!-- Modal: Name -->
<div class="modal-bg" id="name-modal">
    <div class="modal-content">
        <h2>Rename Bakery</h2>
        <input type="text" class="modal-input" id="name-field" placeholder="Owner Name...">
        <br>
        <button class="btn" onclick="confirmName()">SET NAME</button>
    </div>
</div>

<!-- Modal: Debug -->
<div class="modal-bg" id="debug-modal">
    <div class="modal-content">
        <h2 style="color: var(--debug)">Zenith Console v5.0.26</h2>
        <button class="btn btn-debug" onclick="cheatCookies()">+1,000,000 COOKIES</button>
        <button class="btn btn-debug" onclick="godMode()">GOD MODE (Toggle Free)</button>
        <br><br>
        <button class="btn" onclick="closeModal('debug-modal')">EXIT</button>
    </div>
</div>

<script>
    let state = {
        cookies: 0,
        clickPower: 1,
        owner: "Player",
        activeTab: 'units',
        multiplier: 1,
        isGod: false,
        store: {
            units: [
                { id: 0, name: 'Grandma', cost: 100, cps: 1, count: 0, desc: 'Bakes slowly but surely.' },
                { id: 1, name: 'Cookie Farm', cost: 1100, cps: 8, count: 0, desc: 'Growing cookies from dough.' },
                { id: 2, name: 'Cookie Factory', cost: 12000, cps: 47, count: 0, desc: 'Industrial mass production.' },
                { id: 3, name: 'Wizard Tower', cost: 130000, cps: 260, count: 0, desc: 'Summons cookies from thin air.' }
            ],
            upgrades: [
                { id: 0, name: 'Reinforced Finger', cost: 50, effect: 'click', mult: 2, desc: 'Clicks are 2x stronger.' },
                { id: 1, name: 'Steel Rolling Pin', cost: 500, effect: 'grandma', mult: 2, desc: 'Grandmas are 2x as fast.' },
                { id: 2, name: 'Irrigation System', cost: 5000, effect: 'farm', mult: 2, desc: 'Farms produce 2x more.' }
            ]
        }
    };

    function openModal(id) { document.getElementById(id).style.display = 'flex'; }
    function closeModal(id) { document.getElementById(id).style.display = 'none'; }

    function confirmName() {
        let val = document.getElementById('name-field').value;
        if (val) {
            state.owner = val;
            document.getElementById('bakery-label').innerText = val + "'s Bakery";
            if (val.toLowerCase() === 'gregboi') document.getElementById('debug-corner').style.display = 'block';
            else document.getElementById('debug-corner').style.display = 'none';
        }
        closeModal('name-modal');
    }

    function cheatCookies() { state.cookies += 1000000; update(); }
    function godMode() { state.isGod = !state.isGod; alert("God Mode: " + (state.isGod ? "ON" : "OFF")); }

    function clickMainCookie(e) {
        let gain = state.clickPower * state.multiplier;
        state.cookies += gain;
        spawnText(e.clientX, e.clientY, `+${gain}`);
        update();
    }

    function spawnText(x, y, txt) {
        const el = document.createElement('div');
        el.className = 'float'; el.style.left = x + 'px'; el.style.top = y + 'px'; el.innerText = txt;
        document.body.appendChild(el);
        setTimeout(() => el.remove(), 800);
    }

    function spawnGold() {
        const gc = document.getElementById('gold-cookie');
        gc.style.left = Math.random() * 80 + '%';
        gc.style.top = Math.random() * 80 + '%';
        gc.style.display = 'block';
        setTimeout(() => gc.style.display = 'none', 10000);
    }
    setInterval(spawnGold, 45000);

    function clickGold() {
        state.multiplier = 7;
        document.getElementById('gold-cookie').style.display = 'none';
        alert("FRENZY! 7x Production for 20s!");
        setTimeout(() => state.multiplier = 1, 20000);
    }

    function buy(type, id) {
        let item = state.store[type][id];
        let price = state.isGod ? 0 : item.cost;
        if (state.cookies >= price) {
            state.cookies -= price;
            if (type === 'units') {
                item.count++;
                item.cost *= 1.15;
            } else {
                if (item.effect === 'click') state.clickPower *= item.mult;
                if (item.effect === 'grandma') state.store.units[0].cps *= item.mult;
                if (item.effect === 'farm') state.store.units[1].cps *= item.mult;
                state.store.upgrades.splice(id, 1); // Remove upgrade after purchase
            }
            update();
        }
    }

    function switchTab(t) {
        state.activeTab = t;
        document.getElementById('tab-units').classList.toggle('active', t === 'units');
        document.getElementById('tab-upgrades').classList.toggle('active', t === 'upgrades');
        update();
    }

    function update() {
        document.getElementById('count-display').innerText = Math.floor(state.cookies).toLocaleString();
        let totalCPS = state.store.units.reduce((acc, u) => acc + (u.count * u.cps), 0) * state.multiplier;
        document.getElementById('cps-display').innerText = totalCPS.toLocaleString();

        const container = document.getElementById('shop-container');
        container.innerHTML = '';
        state.store[state.activeTab].forEach((item, i) => {
            const canAfford = state.cookies >= item.cost || state.isGod;
            const card = document.createElement('div');
            card.className = `item-card ${canAfford ? 'affordable' : ''}`;
            card.onclick = () => buy(state.activeTab, i);
            card.innerHTML = `
                <div>
                    <h4>${item.name} ${item.count !== undefined ? '('+item.count+')' : ''}</h4>
                    <p>${item.desc}</p>
                    <p>Price: ${Math.floor(item.cost).toLocaleString()}</p>
                </div>
            `;
            container.appendChild(card);
        });
    }

    setInterval(() => {
        let totalCPS = state.store.units.reduce((acc, u) => acc + (u.count * u.cps), 0) * state.multiplier;
        state.cookies += (totalCPS / 10);
        update();
    }, 100);

    update();
</script>
</body>
</html>
