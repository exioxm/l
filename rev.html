<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Cookie Clicker: Zenith 2.0</title>
    <style>
        :root { --p: #ff9d00; --s: #2d1b0c; --bg: #0d0d15; --card: #161625; --white: #ffffff; }
        body { margin: 0; background: var(--bg); color: white; font-family: 'Inter', sans-serif; display: flex; height: 100vh; overflow: hidden; }
        
        /* Layout */
        #game-left { flex: 1.5; display: flex; flex-direction: column; align-items: center; justify-content: center; position: relative; }
        #game-right { flex: 1; background: #11111d; border-left: 4px solid #222; display: flex; flex-direction: column; }

        /* Cookie Engine */
        .count-container { text-align: center; margin-bottom: 30px; }
        .count { font-size: 64px; font-weight: 900; color: var(--p); text-shadow: 0 0 30px rgba(255, 157, 0, 0.3); }
        #cookie { width: 280px; height: 280px; background: radial-gradient(circle at 30% 30%, #e6a46a, #d2691e); border-radius: 50%; cursor: pointer; position: relative; box-shadow: 0 15px 50px rgba(0,0,0,0.6); transition: transform 0.05s; }
        #cookie:active { transform: scale(0.92); }
        .chip { position: absolute; background: #3e2723; border-radius: 50%; }

        /* Shop Styling */
        .shop-tabs { display: flex; border-bottom: 2px solid #222; }
        .tab { flex: 1; padding: 15px; text-align: center; cursor: pointer; font-weight: bold; background: #1a1a2e; }
        .tab.active { background: var(--p); color: var(--s); }
        .scroll-area { flex: 1; overflow-y: auto; padding: 15px; }

        /* THE UPGRADE WHITE GLOW LOGIC */
        .item { 
            background: var(--card); padding: 15px; border-radius: 10px; margin-bottom: 10px; 
            display: flex; justify-content: space-between; align-items: center;
            border: 2px solid #222; transition: 0.2s; opacity: 0.6; pointer-events: none;
        }
        /* When user has enough clicks: Turn white and enable */
        .item.affordable { 
            background: var(--white); color: #000; opacity: 1; pointer-events: auto; 
            box-shadow: 0 0 15px rgba(255,255,255,0.4); border-color: var(--white);
        }
        .item.affordable h3 { color: #000; }
        .item h3 { margin: 0; color: var(--p); font-size: 16px; }
        .item p { margin: 3px 0 0; font-size: 12px; color: #888; }
        .affordable p { color: #444; }

        /* Animations */
        @keyframes floatNum { 0% { transform: translateY(0); opacity: 1; } 100% { transform: translateY(-100px); opacity: 0; } }
        .floating-num { position: absolute; pointer-events: none; animation: floatNum 0.8s ease-out forwards; font-weight: 900; z-index: 100; }
    </style>
</head>
<body>

<div id="game-left">
    <div class="count-container">
        <div class="count" id="cookies">0</div>
        <div style="color: #666">Cookies Per Second: <span id="cps">0</span></div>
    </div>
    <div id="cookie" onclick="clickCookie(event)">
        <!-- Dynamic Chocolate Chips -->
        <div class="chip" style="width: 20px; height: 20px; top: 50px; left: 60px;"></div>
        <div class="chip" style="width: 25px; height: 25px; top: 140px; left: 40px;"></div>
        <div class="chip" style="width: 18px; height: 18px; top: 180px; left: 160px;"></div>
        <div class="chip" style="width: 22px; height: 22px; top: 60px; left: 180px;"></div>
        <div class="chip" style="width: 20px; height: 20px; top: 120px; left: 110px;"></div>
    </div>
</div>

<div id="game-right">
    <div class="shop-tabs">
        <div class="tab active">Store</div>
    </div>
    <div class="scroll-area" id="shop-items"></div>
</div>

<script>
    let cookies = 0;
    let clickPower = 1;
    
    // Combined Buildings and "Cookie Clicker Upgrades"
    const store = [
        { id: 'u1', name: 'Reinforced Index Finger', cost: 25, type: 'upgrade', power: 1, desc: 'Your clicks are 2x as strong.', owned: 0 },
        { id: 'b1', name: 'Grandma', cost: 100, type: 'building', power: 1, desc: 'Bakes 1 cookie per second.', owned: 0 },
        { id: 'u2', name: 'Steel-Plated Rolling Pins', cost: 500, type: 'upgrade', power: 2, desc: 'Grandmas are 2x as efficient.', owned: 0 },
        { id: 'b2', name: 'Cookie Factory', cost: 1100, type: 'building', power: 8, desc: 'Bakes 8 cookies per second.', owned: 0 },
        { id: 'u3', name: 'Industrial Oven Lubricant', cost: 5000, type: 'upgrade', power: 3, desc: 'Factories are 3x as efficient.', owned: 0 },
        { id: 'b3', name: 'Wizard Tower', cost: 12000, type: 'building', power: 47, desc: 'Summons 47 cookies per second.', owned: 0 }
    ];

    function clickCookie(e) {
        cookies += clickPower;
        spawnText(e.clientX, e.clientY, `+${clickPower}`);
        update();
    }

    function spawnText(x, y, txt) {
        const el = document.createElement('div');
        el.className = 'floating-num';
        el.style.left = x + 'px';
        el.style.top = y + 'px';
        el.innerText = txt;
        document.body.appendChild(el);
        setTimeout(() => el.remove(), 800);
    }

    function buy(index) {
        const item = store[index];
        if (cookies >= item.cost) {
            cookies -= item.cost;
            item.owned++;
            
            // Logic for "Clicker Upgrades" vs Buildings
            if (item.type === 'upgrade') {
                clickPower *= 2; 
                item.cost *= 10; // Upgrades get much harder
            } else {
                item.cost *= 1.15; // Buildings scale standardly
            }
            
            update();
        }
    }

    function update() {
        document.getElementById('cookies').innerText = Math.floor(cookies).toLocaleString();
        
        // Calculate CPS
        let totalCPS = 0;
        store.forEach(item => {
            if (item.type === 'building') totalCPS += (item.owned * item.power);
        });
        document.getElementById('cps').innerText = totalCPS.toFixed(1);

        // Render Shop with White Highlighting
        const shop = document.getElementById('shop-items');
        shop.innerHTML = '';
        store.forEach((item, i) => {
            const isAffordable = cookies >= item.cost;
            const div = document.createElement('div');
            div.className = `item ${isAffordable ? 'affordable' : ''}`;
            div.innerHTML = `
                <div class="info">
                    <h3>${item.name} (${item.owned})</h3>
                    <p>${item.desc}</p>
                    <p>Cost: ${Math.floor(item.cost).toLocaleString()}</p>
                </div>
            `;
            div.onclick = () => buy(i);
            shop.appendChild(div);
        });
    }

    // 60FPS Smooth Game Loop
    setInterval(() => {
        let totalCPS = 0;
        store.forEach(item => {
            if (item.type === 'building') totalCPS += (item.owned * item.power);
        });
        cookies += (totalCPS / 10);
        update();
    }, 100);

    update();
</script>
</body>
</html>
