<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Zenith 10.0: Rainbow Ultimate</title>
    <style>
        :root { --p: #ff9d00; --bg: #020204; --card: #080812; --white: #ffffff; --debug: #ff3e3e; }
        body { margin: 0; background: var(--bg); color: white; font-family: 'Inter', sans-serif; display: flex; height: 100vh; overflow: hidden; }

        /* Sliding Rainbow Animation */
        .rainbow-text {
            background: linear-gradient(to right, #ff0000, #ff8800, #ffff00, #00ff00, #0088ff, #ff00ff, #ff0000);
            background-size: 400% 100%;
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent !important;
            animation: rainbow-slide 4s linear infinite;
            font-weight: 900 !important;
            text-shadow: none !important; /* Shadows break background-clip */
        }
        @keyframes rainbow-slide {
            0% { background-position: 0% 0%; }
            100% { background-position: 100% 0%; }
        }

        /* Version & Layout */
        #v-tag { position: fixed; bottom: 10px; left: 10px; color: #333; font-size: 11px; font-weight: bold; z-index: 1000; }
        
        #game-left { flex: 1.2; display: flex; flex-direction: column; align-items: center; justify-content: center; border-right: 1px solid #1a1a2e; position: relative; }
        #game-mid { flex: 1.5; background: #040408; display: grid; grid-template-columns: repeat(auto-fill, minmax(60px, 1fr)); align-content: flex-start; padding: 25px; overflow-y: auto; border-right: 1px solid #1a1a2e; }
        #game-right { flex: 1.2; background: #000; display: flex; flex-direction: column; }

        #particle-canvas { position: absolute; top: 0; left: 0; pointer-events: none; z-index: 10; }

        /* Fixed Top-Left Admin Button */
        #debug-trigger { 
            position: fixed; top: 20px; left: 20px; 
            background: var(--debug); padding: 12px 20px; 
            border-radius: 10px; cursor: pointer; display: none; 
            font-weight: 900; z-index: 1000; border: none; 
            color: white; box-shadow: 0 0 20px rgba(255, 62, 62, 0.4); 
        }

        /* Centered Cookie Engine */
        .engine-container { text-align: center; }
        .bakery-header { font-size: 28px; color: #666; cursor: pointer; margin-bottom: 10px; transition: 0.2s; }
        .count { font-size: 75px; font-weight: 900; color: var(--p); text-shadow: 0 0 40px rgba(255, 157, 0, 0.3); }

        #cookie { width: 300px; height: 300px; background: radial-gradient(circle at 35% 35%, #e6a46a, #d2691e); border-radius: 50%; cursor: pointer; margin: 20px auto; box-shadow: 0 20px 70px rgba(0,0,0,1); transition: transform 0.05s; position: relative; }
        #cookie:active { transform: scale(0.93); }

        /* District Buildings */
        .building-vis { width: 60px; height: 60px; margin: 6px; background: #111122; border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 28px; animation: pop 0.4s cubic-bezier(0.34, 1.56, 0.64, 1); border: 1px solid #222; }
        @keyframes pop { from { transform: scale(0); } to { transform: scale(1); } }

        /* Shop Styles */
        .shop-header { padding: 25px; font-size: 30px; font-weight: 900; border-bottom: 1px solid #1a1a2e; text-align: center; color: var(--p); }
        .item { background: var(--card); padding: 20px; border-radius: 16px; margin: 15px; display: flex; justify-content: space-between; align-items: center; border: 2px solid #1a1a2e; transition: 0.3s; opacity: 0.3; pointer-events: none; }
        .item.affordable { background: var(--white); color: #000; opacity: 1; pointer-events: auto; box-shadow: 0 0 30px rgba(255,255,255,0.2); border-color: var(--white); transform: scale(1.02); }
        .item h3 { margin: 0; color: var(--p); }
        .affordable h3 { color: #000; }

        /* Modals */
        .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); display: none; align-items: center; justify-content: center; z-index: 2000; backdrop-filter: blur(15px); }
        .modal { background: #0c0c18; padding: 50px; border-radius: 30px; text-align: center; border: 2px solid var(--p); width: 360px; }
        .modal input { background: #000; border: 2px solid #222; color: white; padding: 15px; border-radius: 12px; width: 85%; font-size: 18px; margin: 20px 0; text-align: center; }
        .btn { background: var(--p); color: #000; border: none; padding: 15px 30px; border-radius: 12px; font-weight: 800; cursor: pointer; }
    </style>
</head>
<body>

<canvas id="particle-canvas"></canvas>
<div id="v-tag">ZENITH ENGINE v10.0.2026</div>
<button id="debug-trigger" onclick="openModal('name-modal')">ZENITH CONSOLE</button>

<div id="game-left">
    <div class="engine-container">
        <div class="bakery-header" id="bakery-display" onclick="openModal('name-modal')">Player's Bakery</div>
        <div class="count" id="cookie-display">0</div>
        <div style="color:#555; font-weight:900;">CPS: <span id="cps-display">0</span></div>
        <div id="cookie" onclick="handleCookieClick(event)"></div>
    </div>
</div>

<div id="game-mid" id="visual-district"></div>

<div id="game-right">
    <div class="shop-header">THE FORGE v10.0</div>
    <div class="scroll-area" id="shop-items"></div>
</div>

<div class="modal-overlay" id="name-modal">
    <div class="modal">
        <h2>EMPIRE ACCESS</h2>
        <input type="text" id="name-input" placeholder="Owner Prefix...">
        <br>
        <button class="btn" onclick="saveName()">CONFIRM</button>
        <div id="debug-options" style="display:none; margin-top:30px;">
            <button class="btn" style="background:var(--debug); color:white; width:100%;" onclick="cheat()">+1,000,000 COOKIES</button>
        </div>
    </div>
</div>

<script>
    let state = {
        cookies: 0,
        clickPower: 1,
        store: [
            { name: 'Titanium Finger', cost: 15, type: 'up', power: 2, icon: 'â˜ï¸', desc: 'Double Click Power', count: 0 },
            { name: 'Grandma', cost: 100, type: 'build', power: 1, icon: 'ðŸ‘µ', desc: '+1 CPS', count: 0 },
            { name: 'Nano Farm', cost: 1100, type: 'build', power: 12, icon: 'ðŸšœ', desc: '+12 CPS', count: 0 },
            { id:3, name: 'Factory', cost: 12000, type: 'build', power: 75, icon: 'ðŸ­', desc: '+75 CPS', count: 0 },
            { id:4, name: 'Void Port', cost: 160000, type: 'build', power: 500, icon: 'ðŸŒ€', desc: '+500 CPS', count: 0 }
        ]
    };

    // --- Particle System ---
    const canvas = document.getElementById('particle-canvas');
    const ctx = canvas.getContext('2d');
    let particles = [];
    window.onresize = () => { canvas.width = window.innerWidth; canvas.height = window.innerHeight; };
    window.onresize();

    class Particle {
        constructor(x, y) {
            this.x = x; this.y = y;
            this.vx = (Math.random() - 0.5) * 12;
            this.vy = Math.random() * -12 - 5;
            this.life = 1;
        }
        update() { this.x += this.vx; this.y += this.vy; this.vy += 0.6; this.life -= 0.025; }
        draw() {
            ctx.fillStyle = `rgba(255, 157, 0, ${this.life})`;
            ctx.font = "bold 22px Inter"; ctx.fillText("+", this.x, this.y);
        }
    }

    function animate() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        particles = particles.filter(p => p.life > 0);
        particles.forEach(p => { p.update(); p.draw(); });
        requestAnimationFrame(animate);
    }
    animate();

    // --- Logic ---
    function openModal(id) { document.getElementById(id).style.display = 'flex'; }
    function closeModal(id) { document.getElementById(id).style.display = 'none'; }

    function saveName() {
        let val = document.getElementById('name-input').value;
        const display = document.getElementById('bakery-display');
        if (val) {
            if (val.toLowerCase() === 'gregboi') {
                display.innerText = "Rainbow's Bakery";
                display.classList.add('rainbow-text');
                document.getElementById('debug-trigger').style.display = 'block';
                document.getElementById('debug-options').style.display = 'block';
            } else {
                display.innerText = val + "'s Bakery";
                display.classList.remove('rainbow-text');
            }
        }
        closeModal('name-modal');
    }

    function cheat() { state.cookies += 1000000; updateUI(); }

    function handleCookieClick(e) {
        state.cookies += state.clickPower;
        particles.push(new Particle(e.clientX, e.clientY));
        updateUI();
    }

    function buy(idx) {
        let item = state.store[idx];
        if (state.cookies >= item.cost) {
            state.cookies -= item.cost;
            item.count++;
            if (item.type === 'up') {
                state.clickPower *= item.power;
                item.cost *= 15;
            } else {
                item.cost *= 1.15;
                const el = document.createElement('div');
                el.className = 'building-vis'; el.innerText = item.icon;
                document.getElementById('game-mid').appendChild(el);
            }
            updateUI();
        }
    }

    function updateUI() {
        document.getElementById('cookie-display').innerText = Math.floor(state.cookies).toLocaleString();
        let totalCPS = state.store.reduce((acc, i) => i.type === 'build' ? acc + (i.count * i.power) : acc, 0);
        document.getElementById('cps-display').innerText = totalCPS.toLocaleString();

        const container = document.getElementById('shop-items');
        container.innerHTML = '';
        state.store.forEach((item, i) => {
            const canAfford = state.cookies >= item.cost;
            const div = document.createElement('div');
            div.className = `item ${canAfford ? 'affordable' : ''}`;
            div.onclick = () => buy(i);
            div.innerHTML = `<div><h3>${item.name} (${item.count})</h3><p>${item.desc}</p><p>PRICE: ${Math.floor(item.cost).toLocaleString()}</p></div>`;
            container.appendChild(div);
        });
    }

    setInterval(() => {
        let totalCPS = state.store.reduce((acc, i) => i.type === 'build' ? acc + (i.count * i.power) : acc, 0);
        state.cookies += (totalCPS / 10);
        updateUI();
    }, 100);

    updateUI();
</script>
</body>
</html>
