<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Zenith 9.0: Rainbow Edition</title>
    <style>
        :root { --p: #ff9d00; --bg: #020204; --card: #080812; --white: #ffffff; }
        body { margin: 0; background: var(--bg); color: white; font-family: 'Inter', sans-serif; display: flex; height: 100vh; overflow: hidden; }

        /* Rainbow Animation */
        @keyframes rainbow {
            0% { color: #ff0000; text-shadow: 0 0 10px #ff0000; }
            20% { color: #ff8800; text-shadow: 0 0 10px #ff8800; }
            40% { color: #ffff00; text-shadow: 0 0 10px #ffff00; }
            60% { color: #00ff00; text-shadow: 0 0 10px #00ff00; }
            80% { color: #0088ff; text-shadow: 0 0 10px #0088ff; }
            100% { color: #ff00ff; text-shadow: 0 0 10px #ff00ff; }
        }
        .rainbow-text { animation: rainbow 3s linear infinite; font-weight: 900 !important; }

        /* Version & Layout */
        #v-tag { position: fixed; bottom: 10px; left: 10px; color: #333; font-size: 11px; font-weight: bold; z-index: 1000; }
        #game-left { flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; border-right: 1px solid #1a1a2e; position: relative; z-index: 5; }
        #game-mid { flex: 1.5; background: #040408; display: flex; flex-wrap: wrap; align-content: flex-start; padding: 25px; overflow-y: auto; border-right: 1px solid #1a1a2e; }
        #game-right { flex: 1; background: #000; display: flex; flex-direction: column; }

        #particle-canvas { position: absolute; top: 0; left: 0; pointer-events: none; z-index: 10; }

        /* Clicker UI */
        .bakery-header { font-size: 26px; color: #555; cursor: pointer; margin-bottom: 5px; font-weight: 700; transition: 0.2s; }
        .bakery-header:hover { color: var(--white); }
        .count { font-size: 75px; font-weight: 900; color: var(--p); text-shadow: 0 0 40px rgba(255, 157, 0, 0.3); }

        #cookie { width: 280px; height: 280px; background: radial-gradient(circle at 35% 35%, #e6a46a, #d2691e); border-radius: 50%; cursor: pointer; position: relative; box-shadow: 0 15px 60px rgba(0,0,0,0.9); transition: transform 0.05s; }
        #cookie:active { transform: scale(0.93); }

        /* District & Shop */
        .building-vis { width: 60px; height: 60px; margin: 6px; background: #111122; border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 28px; animation: pop 0.4s cubic-bezier(0.34, 1.56, 0.64, 1); border: 1px solid #222; }
        @keyframes pop { from { transform: scale(0); } to { transform: scale(1); } }

        .shop-header { padding: 25px; font-size: 28px; font-weight: 900; border-bottom: 1px solid #1a1a2e; text-align: center; color: var(--p); }
        .scroll-area { flex: 1; overflow-y: auto; padding: 20px; }
        .item { background: var(--card); padding: 20px; border-radius: 16px; margin-bottom: 15px; display: flex; justify-content: space-between; align-items: center; border: 2px solid #1a1a2e; transition: 0.3s; opacity: 0.3; pointer-events: none; }
        .item.affordable { background: var(--white); color: #000; opacity: 1; pointer-events: auto; box-shadow: 0 0 25px rgba(255,255,255,0.2); border-color: var(--white); }
        .item h3 { margin: 0; font-size: 19px; color: var(--p); }
        .affordable h3 { color: #000; }
        .item p { margin: 3px 0 0; font-size: 12px; color: #555; }

        /* Custom In-Game Modals */
        .modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); display: none; align-items: center; justify-content: center; z-index: 1000; backdrop-filter: blur(10px); }
        .modal { background: #0c0c18; padding: 45px; border-radius: 25px; text-align: center; border: 2px solid var(--p); width: 340px; box-shadow: 0 0 50px rgba(0,0,0,1); }
        .modal input { background: #000; border: 2px solid #222; color: white; padding: 15px; border-radius: 10px; width: 85%; font-size: 18px; margin: 20px 0; outline: none; text-align: center; }
        .btn { background: var(--p); color: #000; border: none; padding: 15px 30px; border-radius: 12px; font-weight: 800; cursor: pointer; transition: 0.2s; }
    </style>
</head>
<body>

<canvas id="particle-canvas"></canvas>
<div id="v-tag">ZENITH ENGINE v9.0.2026</div>


<div id="game-left">
    <div class="bakery-header" id="bakery-display" onclick="openModal('name-modal')">Player's Bakery</div>
    <div class="count" id="cookie-display">0</div>
    <div style="color:#444; font-weight:900; margin-bottom:15px;">CPS: <span id="cps-display">0</span></div>
    <div id="cookie" onclick="handleCookieClick(event)"></div>
</div>

<div id="game-mid" id="visual-district"></div>

<div id="game-right">
    <div class="shop-header">THE FORGE v9.0</div>
    <div class="scroll-area" id="shop-items"></div>
</div>

<div class="modal-overlay" id="name-modal">
    <div class="modal">
        <h2 style="letter-spacing:1px;">RENAME BAKERY</h2>
        <input type="text" id="name-input" placeholder="Owner Prefix...">
        <br>
        <button class="btn" onclick="saveName()">CONFIRM</button>
        <div id="debug-options" style="display:none; margin-top:25px; border-top:1px solid #222; padding-top:20px;">
            <p style="font-size:10px; color:#555; margin-top:10px;">RAINBOW MODE ACTIVE</p>
        </div>
    </div>
</div>

<script>
    let state = {
        cookies: 0,
        clickPower: 1,
        owner: "Player",
        isAdmin: false,
        store: [
            { id:0, name: 'Tungsten Finger', cost: 15, type: 'up', power: 2, icon: 'â˜ï¸', desc: 'Double Clicks', count: 0 },
            { id:1, name: 'Grandma', cost: 100, type: 'build', power: 1, icon: 'ðŸ‘µ', desc: '+1 CPS', count: 0 },
            { id:2, name: 'Nano Farm', cost: 1100, type: 'build', power: 10, icon: 'ðŸšœ', desc: '+10 CPS', count: 0 },
            { id:3, name: 'Mega Factory', cost: 12000, type: 'build', power: 65, icon: 'ðŸ­', desc: '+65 CPS', count: 0 },
            { id:4, name: 'Warp Drive', cost: 150000, type: 'build', power: 450, icon: 'ðŸš€', desc: '+450 CPS', count: 0 }
        ]
    };

    const canvas = document.getElementById('particle-canvas');
    const ctx = canvas.getContext('2d');
    let particles = [];
    window.onresize = () => { canvas.width = window.innerWidth; canvas.height = window.innerHeight; };
    window.onresize();

    class Particle {
        constructor(x, y) {
            this.x = x; this.y = y;
            this.vx = (Math.random() - 0.5) * 12;
            this.vy = Math.random() * -12 - 5;
            this.life = 1;
        }
        update() { this.x += this.vx; this.y += this.vy; this.vy += 0.6; this.life -= 0.025; }
        draw() {
            ctx.fillStyle = `rgba(255, 157, 0, ${this.life})`;
            ctx.font = "bold 24px Inter"; ctx.fillText("+", this.x, this.y);
        }
    }

    function animate() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        particles = particles.filter(p => p.life > 0);
        particles.forEach(p => { p.update(); p.draw(); });
        requestAnimationFrame(animate);
    }
    animate();

    function openModal(id) { document.getElementById(id).style.display = 'flex'; }
    function closeModal(id) { document.getElementById(id).style.display = 'none'; }

    function saveName() {
        let val = document.getElementById('name-input').value;
        const display = document.getElementById('bakery-display');
        if (val) {
            if (val.toLowerCase() === 'gregboi') {
                state.isAdmin = true;
                display.innerText = "Rainbow's Bakery";
                display.classList.add('rainbow-text');
                document.getElementById('debug-options').style.display = 'block';
            } else {
                state.isAdmin = false;
                display.innerText = val + "'s Bakery";
                display.classList.remove('rainbow-text');
                document.getElementById('debug-options').style.display = 'none';
            }
        }
        closeModal('name-modal');
    }

    function handleCookieClick(e) {
        state.cookies += state.clickPower;
        particles.push(new Particle(e.clientX, e.clientY));
        updateUI();
    }

    function buy(idx) {
        let item = state.store[idx];
        if (state.cookies >= item.cost) {
            state.cookies -= item.cost;
            item.count++;
            if (item.type === 'up') {
                state.clickPower *= item.power;
                item.cost *= 12;
            } else {
                item.cost *= 1.15;
                const el = document.createElement('div');
                el.className = 'building-vis'; el.innerText = item.icon;
                document.getElementById('game-mid').appendChild(el);
            }
            updateUI();
        }
    }

    function updateUI() {
        document.getElementById('cookie-display').innerText = Math.floor(state.cookies).toLocaleString();
        let totalCPS = state.store.reduce((acc, i) => i.type === 'build' ? acc + (i.count * i.power) : acc, 0);
        document.getElementById('cps-display').innerText = totalCPS.toLocaleString();

        const container = document.getElementById('shop-items');
        container.innerHTML = '';
        state.store.forEach((item, i) => {
            const canAfford = state.cookies >= item.cost;
            const div = document.createElement('div');
            div.className = `item ${canAfford ? 'affordable' : ''}`;
            div.onclick = () => buy(i);
            div.innerHTML = `<div><h3>${item.name} (${item.count})</h3><p>${item.desc}</p><p>PRICE: ${Math.floor(item.cost).toLocaleString()}</p></div>`;
            container.appendChild(div);
        });
    }

    // 60FPS High-Precision Income Loop
    let lastTime = performance.now();
    function gameLoop(now) {
        let dt = now - lastTime;
        if (dt >= 100) {
            let totalCPS = state.store.reduce((acc, i) => i.type === 'build' ? acc + (i.count * i.power) : acc, 0);
            state.cookies += (totalCPS / 10);
            updateUI();
            lastTime = now;
        }
        requestAnimationFrame(gameLoop);
    }
    requestAnimationFrame(gameLoop);

    updateUI();
</script>
</body>
</html>
