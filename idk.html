<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CYBER DRIFT 2025: PRO</title>
    <style>
        @import url('fonts.googleapis.com');
        body { margin: 0; background: #010103; overflow: hidden; display: flex; align-items: center; justify-content: center; height: 100vh; font-family: 'Share Tech Mono', monospace; }
        #game-container { position: relative; width: 450px; height: 750px; border: 2px solid #0ff; box-shadow: 0 0 30px rgba(0, 255, 255, 0.2); background: #000; overflow: hidden; }
        
        .overlay { position: absolute; inset: 0; display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 100; background: rgba(0,0,0,0.9); }
        .hidden { display: none !important; }

        /* Terminals */
        .title { font-family: 'Orbitron'; font-size: 38px; color: #0ff; text-shadow: 0 0 15px #0ff; margin-bottom: 30px; letter-spacing: 3px; }
        .terminal-box { width: 85%; background: rgba(0, 20, 20, 0.8); border: 1px solid #0ff; padding: 20px; box-sizing: border-box; }
        
        /* Navigation */
        .mode-list { display: flex; flex-direction: column; gap: 8px; width: 100%; }
        .mode-btn { background: none; border: 1px solid #066; color: #0ff; padding: 10px; cursor: pointer; text-align: left; font-family: 'Share Tech Mono'; transition: 0.2s; }
        .mode-btn:hover { background: rgba(0, 255, 255, 0.2); border-color: #0ff; padding-left: 20px; }
        
        /* Debug Menu */
        .debug-entry { position: absolute; bottom: 10px; left: 10px; color: #044; cursor: pointer; font-size: 10px; z-index: 200; }
        .debug-window { border: 1px solid #f0f; background: #100; width: 80%; padding: 15px; color: #f0f; }

        /* Game UI */
        #hud { position: absolute; top: 10px; left: 10px; right: 10px; display: flex; justify-content: space-between; color: #0ff; font-size: 14px; pointer-events: none; z-index: 50; }
        #cash-display { position: absolute; bottom: 10px; right: 15px; color: #0f0; }
        
        canvas { display: block; filter: contrast(1.2) brightness(1.1); }
    </style>
</head>
<body>

<div id="game-container">
    <div id="hud" class="hidden">
        <div>DST: <span id="ui-dist">0</span> FT</div>
        <div id="ui-mode" style="color:#f0f">MODE</div>
        <div id="ui-wanted" style="color:#f00"></div>
    </div>
    <div id="cash-display">CREDITS: $<span id="ui-cash">0.00</span></div>

    <!-- MAIN MENU -->
    <div id="home-screen" class="overlay">
        <div class="title">NEURAL DRIFT</div>
        <div class="terminal-box">
            <div style="color:#066; margin-bottom: 10px;">> SELECT_PROTOCOL:</div>
            <div class="mode-list">
                <button class="mode-btn" onclick="openPrompt('NORMAL')">01. NORMAL_RUN</button>
                <button class="mode-btn" onclick="openPrompt('WANTED')">02. WANTED_SYS</button>
                <button class="mode-btn" onclick="openPrompt('CHROMA')">03. CHROMA_BLITZ</button>
                <button class="mode-btn" onclick="openPrompt('GHOST')">04. GHOST_PROC</button>
                <button class="mode-btn" onclick="openPrompt('JAM')">05. TRAFFIC_JAM</button>
                <button class="mode-btn" onclick="openPrompt('SONIC')">06. SONIC_PULSE</button>
            </div>
        </div>
    </div>

    <!-- MODE PROMPT -->
    <div id="prompt-screen" class="overlay hidden">
        <div class="terminal-box" style="border-color: #f0f;">
            <div id="p-title" style="color:#f0f; font-size: 20px; margin-bottom: 10px;">MODE</div>
            <div id="p-body" style="color:#ccc; font-size: 14px; margin-bottom: 20px; min-height: 60px;">Info...</div>
            <button class="mode-btn" onclick="startRun()" style="width:100%; text-align: center; border-color:#f0f;">SYNC NEURAL LINK</button>
            <button class="mode-btn" onclick="closePrompt()" style="width:100%; text-align: center; border:none; color:#666; font-size: 10px;">CANCEL</button>
        </div>
    </div>

    <!-- DEBUG MENU -->
    <div id="debug-menu" class="overlay hidden">
        <div class="debug-window">
            <div>[DEBUG_CORE_v2.5]</div>
            <hr border="0" style="border-top:1px solid #f0f">
            <button class="mode-btn" onclick="adminLogin()" style="color:#f0f; border-color:#f0f; width:100%">EXECUTE_ADMIN_CMD</button>
            <button class="mode-btn" onclick="toggleDebug()" style="border:none; width:100%; font-size:10px;">EXIT</button>
        </div>
    </div>

    <div class="debug-entry" onclick="toggleDebug()">[DBG]</div>
    <canvas id="c"></canvas>
</div>

<script>
const canvas = document.getElementById('c');
const ctx = canvas.getContext('2d');
canvas.width = 450; canvas.height = 750;

let state = 'HOME', mode = '', cash = 0, dist = 0, speed = 8, frame = 0;
let pX = 205, tX = 205, entities = [], wanted = 0;

const DATA = {
    NORMAL: { b: "Standard traffic dodge. Earn cash for distance.", c: "#0ff" },
    WANTED: { b: "Law enforcement pursuit. Avoid patrol cars and SWAT. Heat level rises.", c: "#f00" },
    CHROMA: { b: "Color phasing active. Drive through cars matching your neon hull.", c: "#f0f" },
    GHOST: { b: "Incorporeal while moving. Phasing fails if velocity is zero.", c: "#fff" },
    JAM: { b: "Severe congestion. Minimal gaps between vehicles.", c: "#ff0" },
    SONIC: { b: "Auto-pulse destroying nearby data-traffic. Maintain power levels.", c: "#0f0" },
    ADMIN: { b: "OVERRIDE ACTIVE: EXTREME SPEED. LEVEL 6 HEAT. UNSTABLE REALITY.", c: "#f00" }
};

// UI
function openPrompt(m) {
    mode = m;
    document.getElementById('p-title').innerText = m + "_PROTOCOL";
    document.getElementById('p-body').innerText = DATA[m].b;
    document.getElementById('prompt-screen').classList.remove('hidden');
}
function closePrompt() { document.getElementById('prompt-screen').classList.add('hidden'); }
function toggleDebug() { document.getElementById('debug-menu').classList.toggle('hidden'); }
function adminLogin() {
    let pw = prompt("ENTER ACCESS CODE:");
    if(pw === "test") { toggleDebug(); openPrompt('ADMIN'); }
    else { alert("ACCESS DENIED"); }
}

function startRun() {
    document.querySelectorAll('.overlay').forEach(el => el.classList.add('hidden'));
    document.getElementById('hud').classList.remove('hidden');
    state = 'PLAY'; dist = 0; frame = 0; entities = [];
    wanted = (mode === 'ADMIN') ? 6 : (mode === 'WANTED' ? 1 : 0);
    speed = (mode === 'JAM') ? 5 : (mode === 'ADMIN' ? 15 : 8);
    document.getElementById('ui-mode').innerText = mode;
}

// Logic
window.addEventListener('mousemove', e => {
    const r = canvas.getBoundingClientRect();
    tX = Math.max(10, Math.min(400, e.clientX - r.left - 20));
});

function spawn() {
    let carColor = (mode === 'CHROMA') ? ['#f0f', '#0ff', '#fff'][Math.floor(Math.random()*3)] : '#222';
    if(wanted > 0 && Math.random() > 0.5) carColor = (wanted > 3) ? '#444' : '#00a';
    entities.push({ x: Math.random()*390+10, y: -100, c: carColor });
}

function update() {
    if(state !== 'PLAY') return;
    frame++; dist += speed * 0.1; cash += (speed * 0.0001); speed += 0.0005;
    pX += (tX - pX) * 0.15;

    if(frame % Math.max(8, Math.floor(40 - speed)) === 0) spawn();
    if(mode === 'WANTED' && frame % 1200 === 0) wanted = Math.min(5, wanted + 1);

    entities.forEach((e, i) => {
        e.y += speed;
        // Collision (AABB)
        if(pX < e.x + 35 && pX + 35 > e.x && 650 < e.y + 70 && 720 > e.y) {
            if(mode === 'GHOST' && Math.abs(tX - pX) > 2) {} // Ghost
            else if(mode === 'CHROMA' && e.c === '#f0f') {} // Simplified chroma check
            else die();
        }
        if(e.y > 800) entities.splice(i, 1);
    });

    document.getElementById('ui-dist').innerText = Math.floor(dist);
    document.getElementById('ui-cash').innerText = cash.toFixed(2);
    document.getElementById('ui-wanted').innerText = 'â˜…'.repeat(wanted);
}

function die() {
    state = 'DEAD';
    setTimeout(() => {
        document.getElementById('hud').classList.add('hidden');
        document.getElementById('home-screen').classList.remove('hidden');
        state = 'HOME';
    }, 1500);
}

function draw() {
    ctx.fillStyle = '#000'; ctx.fillRect(0,0,450,750);
    // Grid
    ctx.strokeStyle = '#012'; ctx.lineWidth = 1;
    for(let i=0; i<750; i+=40) {
        let o = (frame * speed) % 40;
        ctx.beginPath(); ctx.moveTo(0, i+o); ctx.lineTo(450, i+o); ctx.stroke();
    }
    if(state === 'PLAY' || state === 'DEAD') {
        entities.forEach(e => {
            ctx.fillStyle = e.c; ctx.shadowBlur = 10; ctx.shadowColor = e.c;
            ctx.fillRect(e.x, e.y, 40, 80);
        });
        ctx.fillStyle = (state === 'DEAD') ? '#f00' : '#0ff'; ctx.shadowBlur = 15;
        ctx.fillRect(pX, 650, 40, 80);
    }
}

function loop() { update(); draw(); requestAnimationFrame(loop); }
loop();
</script>
</body>
</html>
